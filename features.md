## 主要功能

- **注册表单处理**：使用 `useForm` 和 `zodResolver` 来处理表单提交和验证。
- **管理当前聊天机器人**：使用 `useState` 存储和管理当前聊天机器人的信息。
- **滚动消息窗口到底部**：使用 `useRef` 引用消息窗口元素，并在消息更新时自动滚动到底部。
- **切换聊天机器人窗口的打开状态**：通过 `useState` 存储并管理聊天机器人窗口的打开状态。
- **处理聊天消息的发送和接收**：管理用户和聊天机器人的消息交互。
- **动态调整窗口大小**：根据聊天机器人窗口的打开状态调整窗口大小。
- **实时聊天功能**：管理和处理实时聊天模式。
- **不同网页通信**:向父窗口发送消息，用于跨窗口通信。

## 实例说明

假设你有一个聊天机器人窗口，需要在用户交互时自动滚动、动态调整大小、发送和接收消息，通过 useChatBot Hook 可以简化这些逻辑的管理。

## 不同网页的通信实现

### 整理后的描述

应用启动时，在 `chatbot` 组件的 `useEffect` 中会触发 `postMessage` 事件。此事件会通知 `iframe` 动态调整其宽度和高度。随后，`iframe` 的 `message` 事件监听器会被触发，从而设置 `iframe` 的尺寸，并调用 `postMessage` 向 `chatbot` 组件传递当前的 `domainId`。

### 详细解释

1. **触发 `postMessage`**：

   - 在 `chatbot` 组件的 `useEffect` 中，应用会向嵌入的 `iframe` 发送一个 `postMessage` 事件。
   - 该事件用于通知 `iframe` 组件需要调整其宽高。

2. **`iframe` 监听 `message` 事件**：

   - `iframe` 组件中有一个 `message` 事件监听器，当接收到来自 `chatbot` 组件的 `postMessage` 事件时，该监听器会被触发。
   - `iframe` 通过解析事件数据，动态调整自身的宽度和高度，以适应内容的变化。

3. **向 `chatbot` 组件传递 `domainId`**：
   - 调整完尺寸后，`iframe` 组件会使用 `postMessage` 事件将当前的 `domainId` 传递回 `chatbot` 组件。
   - `chatbot` 组件通过监听 `message` 事件，接收并处理来自 `iframe` 的 `domainId`，以继续后续操作。

通过这些步骤，确保了嵌入的 `iframe` 能够根据内容动态调整尺寸，并且能够与主应用程序进行有效的双向通信。
